# åŸºç¡€æµ‹è¯• Workflow
# ç”¨é€”: æ¼”ç¤º Gitea Actions çš„åŸºæœ¬åŠŸèƒ½å’Œè¯­æ³•

name: Basic Test

on:
  push:
    branches:
      - main
      - develop
  pull_request:
    branches:
      - main

jobs:
  hello-world:
    name: Hello World
    runs-on: ubuntu-latest
    container:
      image: catthehacker/ubuntu:act-latest

    steps:
      - name: æ‰“å°æ¬¢è¿ä¿¡æ¯
        run: |
          echo "==========================================="
          echo "ğŸ‰ æ¬¢è¿ä½¿ç”¨ Gitea Actions!"
          echo "==========================================="
          echo ""
          echo "ğŸ“¦ ä»“åº“ä¿¡æ¯:"
          echo "  ä»“åº“: ${{ gitea.repository }}"
          echo "  åˆ†æ”¯: ${{ gitea.ref_name }}"
          echo "  æäº¤: ${{ gitea.sha }}"
          echo "  äº‹ä»¶: ${{ gitea.event_name }}"
          echo ""
          echo "==========================================="

      - name: æ£€å‡ºä»£ç 
        uses: actions/checkout@v3

      - name: æ˜¾ç¤ºç³»ç»Ÿä¿¡æ¯
        run: |
          echo "ç³»ç»Ÿä¿¡æ¯:"
          uname -a
          echo ""
          echo "å½“å‰ç”¨æˆ·: $(whoami)"
          echo "å½“å‰ç›®å½•: $(pwd)"
          echo ""
          echo "æ–‡ä»¶åˆ—è¡¨:"
          ls -lah

  test-commands:
    name: Test Commands
    runs-on: ubuntu-latest
    container:
      image: catthehacker/ubuntu:act-latest

    steps:
      - name: æµ‹è¯•åŸºæœ¬å‘½ä»¤
        run: |
          echo "æµ‹è¯•å¸¸ç”¨å·¥å…·..."
          echo ""

          # Git
          echo "âœ… Git: $(git --version)"

          # Bash
          echo "âœ… Bash: $BASH_VERSION"

          # å…¶ä»–å·¥å…·
          echo "âœ… Curl: $(curl --version | head -1)"
          echo "âœ… Wget: $(wget --version | head -1)"

      - name: æµ‹è¯•ç¯å¢ƒå˜é‡
        run: |
          echo "Gitea ç¯å¢ƒå˜é‡:"
          env | grep GITEA || echo "æ—  Gitea ç‰¹å®šç¯å¢ƒå˜é‡"

      - name: æµ‹è¯•å¤šè¡Œè„šæœ¬
        run: |
          echo "æµ‹è¯•å¾ªç¯..."
          for i in {1..5}; do
            echo "  ç¬¬ $i æ¬¡å¾ªç¯"
          done
          echo "âœ… å¾ªç¯æµ‹è¯•å®Œæˆ"

      - name: æµ‹è¯•æ¡ä»¶åˆ¤æ–­
        run: |
          if [ -d "/home" ]; then
            echo "âœ… /home ç›®å½•å­˜åœ¨"
          else
            echo "âŒ /home ç›®å½•ä¸å­˜åœ¨"
          fi
