# é¡¹ç›®ç»“æ„è¯´æ˜

```
local-deploy-environment/
â”‚
â”œâ”€â”€ ğŸ“„ .env                          # ç¯å¢ƒå˜é‡é…ç½®ï¼ˆå¿…é¡»ä¿®æ”¹é»˜è®¤å¯†ç ï¼‰
â”œâ”€â”€ ğŸ“„ .gitignore                    # Git å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ ğŸ“„ docker-compose.yml            # Docker Compose ä¸»ç¼–æ’æ–‡ä»¶
â”œâ”€â”€ ğŸ“„ README.md                     # é¡¹ç›®ä¸»æ–‡æ¡£
â”œâ”€â”€ ğŸ“„ STRUCTURE.md                  # æœ¬æ–‡ä»¶ - é¡¹ç›®ç»“æ„è¯´æ˜
â”œâ”€â”€ ğŸ“„ start.sh                      # å¿«é€Ÿå¯åŠ¨è„šæœ¬
â”‚
â”œâ”€â”€ ğŸ“ traefik/                      # Traefik åå‘ä»£ç†é…ç½®
â”‚   â”œâ”€â”€ ğŸ“„ Dockerfile                # Traefik é•œåƒæ„å»ºæ–‡ä»¶
â”‚   â”œâ”€â”€ ğŸ“„ traefik.yml               # Traefik é™æ€é…ç½®
â”‚   â””â”€â”€ ğŸ“ dynamic/                  # Traefik åŠ¨æ€é…ç½®ç›®å½•
â”‚       â””â”€â”€ ğŸ“„ dashboard.yml         # Dashboard è®¿é—®æ§åˆ¶é…ç½®
â”‚
â”œâ”€â”€ ğŸ“ gitea/                        # Gitea ä»£ç æ‰˜ç®¡å¹³å°é…ç½®
â”‚   â”œâ”€â”€ ğŸ“„ Dockerfile                # Gitea é•œåƒæ„å»ºæ–‡ä»¶
â”‚   â””â”€â”€ ğŸ“ config/                   # Gitea é…ç½®ç›®å½•
â”‚       â””â”€â”€ ğŸ“„ app.ini               # Gitea åº”ç”¨é…ç½®æ–‡ä»¶
â”‚
â”œâ”€â”€ ğŸ“ postgres/                     # PostgreSQL æ•°æ®åº“é…ç½®
â”‚   â”œâ”€â”€ ğŸ“„ Dockerfile                # PostgreSQL é•œåƒæ„å»ºæ–‡ä»¶
â”‚   â””â”€â”€ ğŸ“„ init.sql                  # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”‚
â””â”€â”€ ğŸ“ data/                         # æŒä¹…åŒ–æ•°æ®ç›®å½•ï¼ˆGit å¿½ç•¥ï¼‰
    â”œâ”€â”€ ğŸ“ gitea/                    # Gitea æ•°æ®ï¼ˆä»“åº“ã€ç”¨æˆ·æ•°æ®ç­‰ï¼‰
    â”œâ”€â”€ ğŸ“ postgres/                 # PostgreSQL æ•°æ®åº“æ–‡ä»¶
    â””â”€â”€ ğŸ“ traefik/                  # Traefik æ•°æ®
        â”œâ”€â”€ ğŸ“„ acme.json             # SSL è¯ä¹¦å­˜å‚¨
        â””â”€â”€ ğŸ“ logs/                 # è®¿é—®æ—¥å¿—ç›®å½•
```

## æ–‡ä»¶è¯´æ˜

### æ ¸å¿ƒé…ç½®æ–‡ä»¶

| æ–‡ä»¶ | ç”¨é€” | æ˜¯å¦éœ€è¦ä¿®æ”¹ |
|------|------|--------------|
| `.env` | ç¯å¢ƒå˜é‡å’Œå¯†ç é…ç½® | âœ… å¿…é¡»ä¿®æ”¹é»˜è®¤å¯†ç  |
| `docker-compose.yml` | æœåŠ¡ç¼–æ’é…ç½® | âš ï¸ æ ¹æ®éœ€æ±‚è°ƒæ•´ |
| `start.sh` | ä¸€é”®å¯åŠ¨è„šæœ¬ | âŒ ä¸€èˆ¬ä¸éœ€è¦ |

### Traefik é…ç½®

| æ–‡ä»¶ | ç”¨é€” | æ˜¯å¦éœ€è¦ä¿®æ”¹ |
|------|------|--------------|
| `traefik/Dockerfile` | é•œåƒæ„å»º | âŒ ä¸€èˆ¬ä¸éœ€è¦ |
| `traefik/traefik.yml` | é™æ€é…ç½®ï¼ˆå…¥å£ç‚¹ã€è¯ä¹¦ç­‰ï¼‰ | âš ï¸ å¯ç”¨ HTTPS æ—¶éœ€è¦ |
| `traefik/dynamic/dashboard.yml` | Dashboard è®¤è¯é…ç½® | âœ… å»ºè®®ä¿®æ”¹å¯†ç  |

### Gitea é…ç½®

| æ–‡ä»¶ | ç”¨é€” | æ˜¯å¦éœ€è¦ä¿®æ”¹ |
|------|------|--------------|
| `gitea/Dockerfile` | é•œåƒæ„å»º | âŒ ä¸€èˆ¬ä¸éœ€è¦ |
| `gitea/config/app.ini` | åº”ç”¨é…ç½® | âš ï¸ æ ¹æ®éœ€æ±‚è°ƒæ•´ |

### PostgreSQL é…ç½®

| æ–‡ä»¶ | ç”¨é€” | æ˜¯å¦éœ€è¦ä¿®æ”¹ |
|------|------|--------------|
| `postgres/Dockerfile` | é•œåƒæ„å»º | âŒ ä¸€èˆ¬ä¸éœ€è¦ |
| `postgres/init.sql` | æ•°æ®åº“åˆå§‹åŒ– | âŒ ä¸€èˆ¬ä¸éœ€è¦ |

## æ•°æ®æŒä¹…åŒ–

æ‰€æœ‰é‡è¦æ•°æ®éƒ½å­˜å‚¨åœ¨ `data/` ç›®å½•ä¸‹ï¼š

- **data/gitea/** - Git ä»“åº“ã€ç”¨æˆ·æ•°æ®ã€é…ç½®ç­‰
- **data/postgres/** - æ•°æ®åº“æ–‡ä»¶
- **data/traefik/** - SSL è¯ä¹¦å’Œæ—¥å¿—

**é‡è¦æç¤º**:
- `data/` ç›®å½•å·²åœ¨ `.gitignore` ä¸­ï¼Œä¸ä¼šè¢« Git è·Ÿè¸ª
- å®šæœŸå¤‡ä»½ `data/` ç›®å½•ä»¥é˜²æ•°æ®ä¸¢å¤±
- è¿ç§»æ—¶åªéœ€å¤åˆ¶æ•´ä¸ª `data/` ç›®å½•

## é…ç½®ä¼˜å…ˆçº§

é…ç½®çš„ä¼˜å…ˆçº§é¡ºåºï¼ˆä»é«˜åˆ°ä½ï¼‰ï¼š

1. **ç¯å¢ƒå˜é‡** (`.env` æ–‡ä»¶)
2. **Docker Compose** (`docker-compose.yml`)
3. **åº”ç”¨é…ç½®** (`app.ini`, `traefik.yml` ç­‰)
4. **é»˜è®¤å€¼**

å¤§éƒ¨åˆ†é…ç½®é€šè¿‡ `.env` æ–‡ä»¶ç®¡ç†ï¼Œä¿®æ”¹åéœ€è¦é‡å¯æœåŠ¡ï¼š

```bash
docker-compose down
docker-compose up -d
```
